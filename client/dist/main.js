!function(e){function t(t){for(var s,n,l=t[0],a=t[1],o=0,h=[];o<l.length;o++)n=l[o],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&h.push(i[n][0]),i[n]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);for(r&&r(t);h.length;)h.shift()()}var s={},i={0:0};function n(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.e=function(e){var t=[],s=i[e];if(0!==s)if(s)t.push(s[2]);else{var l=new Promise((function(t,n){s=i[e]=[t,n]}));t.push(s[2]=l);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=function(e){return n.p+""+e+".main.js"}(e);var r=new Error;a=function(t){o.onerror=o.onload=null,clearTimeout(h);var s=i[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;r.message="Loading chunk "+e+" failed.\n("+n+": "+l+")",r.name="ChunkLoadError",r.type=n,r.request=l,s[1](r)}i[e]=void 0}};var h=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},n.m=e,n.c=s,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var r=a;n(n.s=0)}([function(e,t,s){"use strict";function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.r(t);class n{constructor(e,t,s,n){i(this,"fillStyle","black"),i(this,"strokeStyle","rgb(20,20,20)"),i(this,"lineWidth",4),i(this,"stroke",!1),i(this,"value","?"),this.ctx=e,this.x=t,this.y=s,this.getCellSize=n}draw(){this.ctx.fillStyle=this.fillStyle,this.ctx.strokeStyle=this.strokeStyle,this.ctx.lineWidth=this.lineWidth;let e=this.getCellSize();this.ctx.fillRect(this.x*e,this.y*e,e,e),this.stroke&&this.ctx.strokeRect(this.x*e,this.y*e,e,e)}}class l extends n{constructor(e,t,s,i){super(e,t,s,i),this.fillStyle="rgb(100,100,100)",this.value="#"}}class a extends n{constructor(e,t,s,i){super(e,t,s,i),this.value=" ",this.fillStyle="rgba(255,255,255,0)"}}class o extends n{constructor(e,t,s,i){super(e,t,s,i),this.fillStyle="#8EFFA5",this.value="O"}drawGhost(e,t){this.ctx.fillStyle="rgba(90,255,90,.5)";let s=this.getCellSize();this.ctx.fillRect(e*s,t*s,s,s)}}class r extends n{constructor(e,t,s,i){super(e,t,s,i),this.fillStyle="#FF8E8E",this.value="X"}drawGhost(e,t){this.ctx.fillStyle="rgba(255,90,90,.5)";let s=this.getCellSize();this.ctx.fillRect(e*s,t*s,s,s)}}class h extends n{constructor(e,t,s,i){super(e,t,s,i),this.fillStyle="rgb(255,251,142)",this.value="*"}}class c extends n{constructor(e,t,s,i){super(e,t,s,i),this.fillStyle="rgb(51,153,255)",this.value="*"}}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var u=class{constructor(e){d(this,"drawing",!1),d(this,"brush",-1),d(this,"movingCell",void 0),d(this,"movingCellDragPosition",!1),d(this,"recentlyModifiedCells",[]),this.mazeCanvas=e,this.mazeCanvas.canvas.addEventListener("mousedown",this.onMouseDown()),this.mazeCanvas.canvas.addEventListener("mousemove",this.onMouseMove()),this.mazeCanvas.canvas.addEventListener("mouseup",this.onMouseUp()),this.mazeCanvas.canvas.addEventListener("mouseleave",this.onMouseUp()),this.mazeCanvas.canvas.addEventListener("touchstart",this.onMouseDown()),this.mazeCanvas.canvas.addEventListener("touchmove",this.onMouseMove()),this.mazeCanvas.canvas.addEventListener("touchend",this.onMouseUp()),this.mazeCanvas.canvas.addEventListener("touchcancel",this.onMouseUp())}onMouseDown(){return e=>{if(this.mazeCanvas.solved||this.mazeCanvas.loading)return!1;let{x:t,y:s}=this.getCellCoords(e),i=this.mazeCanvas.getCellAtCoords(t,s);if(i instanceof o||i instanceof r)return this.movingCell=i,!0;this.drawing=!0,this.brush=this.toggleCell(t,s)}}onMouseUp(){return e=>{if(this.mazeCanvas.solved||this.mazeCanvas.loading)return!1;if(this.movingCell){let{x:t,y:s}=this.getCellCoords(e);if(t<0||t>=this.mazeCanvas.mazeDimensions[0]||s<0||s>=this.mazeCanvas.mazeDimensions[1])return this.cancelMovingCell();let i=this.mazeCanvas.getCellAtCoords(t,s);return i instanceof r||i instanceof o?this.cancelMovingCell():(this.movingCell.x=t,this.movingCell.y=s,this.mazeCanvas.replaceCellAtCoords(t,s,this.movingCell),this.cancelMovingCell(),!0)}this.drawing=!1,this.recentlyModifiedCells=[],this.brush=-1}}onMouseMove(){return e=>{if(this.mazeCanvas.solved||this.mazeCanvas.loading)return!1;let{x:t,y:s}=this.getCellCoords(e);this.movingCell?this.movingCellDragPosition=[t,s]:this.drawing&&this.toggleCell(t,s)}}cancelMovingCell(){this.movingCell=void 0,this.movingCellDragPosition=!1}toggleCell(e,t){let s=this.mazeCanvas.getCellAtCoords(e,t);if(s instanceof o||s instanceof r)return!1;let i=s instanceof l?a:l;return!(this.brush>=0&&(i===a&&1===this.brush||i===l&&0===this.brush))&&(!(this.recentlyModifiedCells.indexOf([e,t].join(","))>=0)&&(this.recentlyModifiedCells.push([e,t].join(",")),this.mazeCanvas.replaceCellAtCoords(e,t,new i(this.mazeCanvas.ctx,e,t,()=>this.mazeCanvas.cellSize)),i===a?0:1))}getCellCoords(e){let t,s;if(e.preventDefault(),e.touches){if(this.movingCell&&!e.touches.length)return{x:this.movingCellDragPosition[0],y:this.movingCellDragPosition[1]};t=e.touches[0].clientX,s=e.touches[0].clientY}else t=e.x,s=e.y;return{x:Math.floor((t-e.target.offsetLeft+window.scrollX)/this.mazeCanvas.cellSize),y:Math.floor((s-e.target.offsetTop+window.scrollY)/this.mazeCanvas.cellSize)}}};function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class m{constructor(e,t={}){v(this,"mazeCells",[]),v(this,"solvedCells",[]),v(this,"cellSize",0),v(this,"solved",!1),v(this,"solveStepSpeed",50),v(this,"loading",!1),v(this,"drawingSolvedCellsInterval",void 0),this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.mazeDimensions=t.mazeDimensions||[10,5],this.canvasMaxWidth=t.canvasMaxWidth||500,this.solveStepSpeed=t.solveSpeed||50,this.pencil=new u(this),this.setupCanvas()}cancelSolve(){this.solved&&(this.solved=!1,clearInterval(this.drawingSolvedCellsInterval),this.solvedCells=[])}setupCanvas(){const e=()=>{let e=window.innerWidth>this.canvasMaxWidth?this.canvasMaxWidth:window.innerWidth;this.cellSize=e/this.mazeDimensions[0];let t=this.cellSize*this.mazeDimensions[1];this.canvas.width=e,this.canvas.height=t};e(),window.onresize=e,this.animationStepCallback()()}loadMaze(e){this.mazeCells=[];for(let t=0;t<e.length;t++)for(let s=0;s<e[0].length;s++){let i;switch(e[t][s]){case" ":i=a;break;case"#":i=l;break;case"O":i=o;break;case"X":i=r}this.mazeCells.push(new i(this.ctx,s,t,()=>this.cellSize))}}async solveMaze(e){return this.solved=!0,await this.drawStage(e.visited_coordinates,h),await this.drawStage(e.shortest_path,c),e.time_elapsed_ms}resetMaze(){this.cancelSolve(),this.solvedCells=[]}drawStage(e,t){return new Promise(s=>{this.drawingSolvedCellsInterval=setInterval(()=>{if(0==e.length)return clearInterval(this.drawingSolvedCellsInterval),s(!0);let i=e.shift();this.solvedCells.push(new t(this.ctx,i[0],i[1],()=>this.cellSize))},this.solveStepSpeed)})}getCellAtCoords(e,t){let s=this.mazeCells.filter(s=>s.x===e&&s.y===t);if(s.length)return s[0]}replaceCellAtCoords(e,t,s){this.removeCellsAtCoords(e,t),this.mazeCells.push(s)}removeCellsAtCoords(e,t){for(let s=0;s<this.mazeCells.length;s++)this.mazeCells[s].x===e&&this.mazeCells[s].y===t&&this.mazeCells.splice(s,1)}getMazeStringArray(){let e=[];for(let t=0;t<this.mazeDimensions[1];t++){let t=[];for(let e=0;e<this.mazeDimensions[0];e++)t.push(" ");e.push(t)}for(let t of this.mazeCells)e[t.y][t.x]=t.value;return e}animationStepCallback(){return()=>{requestAnimationFrame(this.animationStepCallback()),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=8,this.ctx.strokeRect(0,0,this.canvas.width,this.canvas.height),this.solvedCells.forEach(e=>e.draw()),this.mazeCells.forEach(e=>e.draw()),this.pencil.movingCellDragPosition&&this.pencil.movingCell.drawGhost(this.pencil.movingCellDragPosition[0],this.pencil.movingCellDragPosition[1]),this.ctx.strokeStyle="rgba(1,1,1,.1)",this.ctx.lineWidth=8;for(let e=0;e<this.mazeDimensions[1];e++)for(let t=0;t<this.mazeDimensions[0];t++)this.ctx.strokeRect(t*this.cellSize,e*this.cellSize,this.cellSize,this.cellSize);this.loading&&(this.ctx.fillStyle="rgba(1,1,1,.6)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height))}}}var g=m;window.MazeCanvas=m;const f="http://localhost:5000";let C,p,z,w;if(s.e(2).then(s.t.bind(null,5,7)),s.e(1).then(s.t.bind(null,6,7)),"/editor.html"===window.location.pathname){let e=50,t=window.innerWidth/e;C=[e,Math.round((window.innerHeight-2*t)/t)],p=window.innerWidth,w=10,z=[["O","X"]]}else C=[9,9],p=600,w=50,z=[["#","#","#","#","#","#","#","#","#"],["#","O"," "," "," "," "," "," ","#"],["#"," "," "," "," "," "," "," ","#"],["#"," "," "," "," "," "," "," ","#"],["#"," "," "," "," "," "," "," ","#"],["#"," "," "," "," "," "," "," ","#"],["#"," "," "," "," "," "," "," ","#"],["#"," "," "," "," "," "," ","X","#"],["#","#","#","#","#","#","#","#","#"]];const y=new g("maze-canvas",{mazeDimensions:C,canvasMaxWidth:p,solveSpeed:w});y.loadMaze(z);const S=document.getElementById("maze__status");function b(){S.innerText=""}document.getElementById("btn__solve").onclick=async()=>{if(y.solved)return;const e=y.getMazeStringArray();let t=document.getElementById("select__algorithm");const s=t.options[t.selectedIndex].value;y.loading=!0;const i=await async function(e,t){return fetch(`${f}/solve/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maze:t})}).then(e=>e.json())}(s,e);var n;i.error||y.solveMaze(i),y.loading=!1,(n=i).error?S.innerText=`Error! ${n.error}`:S.innerText=`Solved in ${Math.round(n.time_elapsed_ms)} ms. Tried ${n.paths_tried} paths. Shortest path is ${n.shortest_path.length} cells.`},document.getElementById("btn__reset").onclick=()=>{y.solved&&y.cancelSolve(),y.resetMaze(),y.loadMaze(z),b()},document.getElementById("btn__scramble").onclick=async()=>{y.solved&&y.cancelSolve(),y.resetMaze(),y.loading=!0;const e=await async function(e){return fetch(`${f}/random_maze?width=${e}&height=${e}`).then(e=>e.json()).then(e=>e.maze)}(9);y.loading=!1,y.loadMaze(e),b()}}]);